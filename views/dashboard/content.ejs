<!-- Welcome Section -->
<div class="bg-white rounded-xl shadow-md border border-gray-200 mb-6 overflow-hidden">
    <div class="bg-gradient-ruxchai p-6 text-white no-gradient" style="background: #0090D3;">
        <div class="flex items-center space-x-4">
            <div class="w-16 h-16 bg-white bg-opacity-20 rounded-xl flex items-center justify-center shadow-lg">
                <i class="icon icon-building icon-xl text-white"></i>
            </div>
            <div class="flex-1">
                <h1 class="text-2xl font-bold mb-1">Ruxchai Cold Storage</h1>
                <p class="text-white text-opacity-90">ระบบจัดการโครงสร้างองค์กร</p>
            </div>
            <div class="hidden sm:flex items-center space-x-2 bg-white bg-opacity-20 px-3 py-2 rounded-full">
                <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                <span class="text-sm font-medium">Online</span>
            </div>
        </div>
    </div>
    
    <div class="p-6 bg-gray-50">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-ruxchai-blue rounded-lg flex items-center justify-center">
                    <i class="icon icon-dashboard text-white"></i>
                </div>
                <div>
                    <p class="font-semibold text-gray-800">System Status</p>
                    <p class="text-sm text-green-600">All systems operational</p>
                </div>
            </div>
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-ruxchai-green rounded-lg flex items-center justify-center">
                    <i class="icon icon-key text-white"></i>
                </div>
                <div>
                    <p class="font-semibold text-gray-800">Security</p>
                    <p class="text-sm text-green-600">Protected connection</p>
                </div>
            </div>
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-ruxchai-grey rounded-lg flex items-center justify-center">
                    <i class="icon icon-building text-white"></i>
                </div>
                <div>
                    <p class="font-semibold text-gray-800">Cold Storage</p>
                    <p class="text-sm text-blue-600">Management ready</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Cards -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
    <!-- Companies Card -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
        <div class="p-4">
            <div class="flex items-center justify-between mb-3">
                <div class="w-12 h-12 bg-gradient-ruxchai rounded-lg flex items-center justify-center no-gradient" style="background: #0090D3;">
                    <i class="icon icon-company text-white"></i>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-bold text-gray-900">
                        <%= typeof stats !== 'undefined' && stats.totalCompanies ? stats.totalCompanies : 0 %>
                    </p>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">บริษัท</p>
                </div>
            </div>
            <a href="/companies" class="text-ruxchai-blue hover:text-blue-dark text-sm font-medium flex items-center group">
                <span>ดูทั้งหมด</span>
                <i class="icon icon-arrow-right ml-1"></i>
            </a>
        </div>
    </div>
    
    <!-- Branches Card -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
        <div class="p-4">
            <div class="flex items-center justify-between mb-3">
                <div class="w-12 h-12 bg-gradient-green rounded-lg flex items-center justify-center no-gradient" style="background: #3AAA35;">
                    <i class="icon icon-branch text-white"></i>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-bold text-gray-900">
                        <%= typeof stats !== 'undefined' && stats.totalBranches ? stats.totalBranches : 0 %>
                    </p>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">สาขา</p>
                </div>
            </div>
            <a href="/branches" class="text-ruxchai-green hover:text-green-dark text-sm font-medium flex items-center group">
                <span>ดูทั้งหมด</span>
                <i class="icon icon-arrow-right ml-1"></i>
            </a>
        </div>
    </div>
    
    <!-- Divisions Card -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
        <div class="p-4">
            <div class="flex items-center justify-between mb-3">
                <div class="w-12 h-12 bg-blue-medium rounded-lg flex items-center justify-center">
                    <i class="icon icon-division text-white"></i>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-bold text-gray-900">
                        <%= typeof stats !== 'undefined' && stats.totalDivisions ? stats.totalDivisions : 0 %>
                    </p>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">ฝ่าย</p>
                </div>
            </div>
            <a href="/divisions" class="text-blue-medium hover:text-blue-dark text-sm font-medium flex items-center group">
                <span>ดูทั้งหมด</span>
                <i class="icon icon-arrow-right ml-1"></i>
            </a>
        </div>
    </div>
    
    <!-- Departments Card -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
        <div class="p-4">
            <div class="flex items-center justify-between mb-3">
                <div class="w-12 h-12 bg-green-medium rounded-lg flex items-center justify-center">
                    <i class="icon icon-users text-white"></i>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-bold text-gray-900">
                        <%= typeof stats !== 'undefined' && stats.totalDepartments ? stats.totalDepartments : 0 %>
                    </p>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">แผนก</p>
                </div>
            </div>
            <a href="/departments" class="text-green-medium hover:text-green-dark text-sm font-medium flex items-center group">
                <span>ดูทั้งหมด</span>
                <i class="icon icon-arrow-right ml-1"></i>
            </a>
        </div>
    </div>
</div>

<!-- Main Content Grid -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Quick Actions -->
    <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200">
        <div class="p-6 border-b border-gray-200">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-ruxchai-blue rounded-lg flex items-center justify-center">
                    <i class="icon icon-plus text-white"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-900">การดำเนินการด่วน</h3>
            </div>
        </div>
        <div class="p-6">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <a href="/companies/new" class="group relative overflow-hidden bg-gradient-ruxchai text-white rounded-lg p-4 fast-card no-gradient">
                    <div class="flex items-center space-x-3">
                        <i class="icon icon-company text-lg"></i>
                        <span class="font-medium">เพิ่มบริษัท</span>
                    </div>
                </a>
                
                <a href="/branches/new" class="group relative overflow-hidden bg-gradient-green text-white rounded-lg p-4 fast-card no-gradient">
                    <div class="flex items-center space-x-3">
                        <i class="icon icon-branch text-lg"></i>
                        <span class="font-medium">เพิ่มสาขา</span>
                    </div>
                </a>
                
                <a href="/divisions/new" class="group relative overflow-hidden bg-blue-medium text-white rounded-lg p-4 fast-card no-gradient">
                    <div class="flex items-center space-x-3">
                        <i class="icon icon-division text-lg"></i>
                        <span class="font-medium">เพิ่มฝ่าย</span>
                    </div>
                </a>
                
                <a href="/departments/new" class="group relative overflow-hidden bg-green-medium text-white rounded-lg p-4 fast-card no-gradient">
                    <div class="flex items-center space-x-3">
                        <i class="icon icon-users text-lg"></i>
                        <span class="font-medium">เพิ่มแผนก</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <!-- API Usage & System Info -->
    <div class="space-y-6">
        <!-- API Usage -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-ruxchai-grey rounded-lg flex items-center justify-center">
                        <i class="icon icon-key text-white icon-sm"></i>
                    </div>
                    <h3 class="font-semibold text-gray-900">API Usage</h3>
                </div>
            </div>
            <div class="p-4 space-y-4">
                <div class="bg-gray-50 rounded-lg p-3">
                    <p class="text-sm text-gray-600 mb-1">การเรียกใช้ API (30 วัน)</p>
                    <p class="text-xl font-bold text-gray-900">
                        <%= typeof apiStats !== 'undefined' && apiStats.totalCalls ? apiStats.totalCalls.toLocaleString() : '0' %>
                    </p>
                </div>
                <div class="bg-gray-50 rounded-lg p-3">
                    <p class="text-sm text-gray-600 mb-1">API Keys ที่ใช้งาน</p>
                    <p class="text-xl font-bold text-gray-900">
                        <%= typeof apiStats !== 'undefined' && apiStats.activeKeys ? apiStats.activeKeys : '0' %>
                    </p>
                </div>
                <a href="/api-keys" class="btn btn-primary w-full">
                    <i class="icon icon-key mr-2"></i>
                    จัดการ API Keys
                </a>
            </div>
        </div>
        
        <!-- System Status -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center">
                        <i class="icon icon-check text-white icon-sm"></i>
                    </div>
                    <h3 class="font-semibold text-gray-900">สถานะระบบ</h3>
                </div>
            </div>
            <div class="p-4 space-y-3">
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600">Database</span>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span class="text-sm text-green-600 font-medium">Connected</span>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600">API Service</span>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span class="text-sm text-green-600 font-medium">Running</span>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600">Cache</span>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span class="text-sm text-green-600 font-medium">Active</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activities -->
<% if (typeof recentActivities !== 'undefined' && recentActivities && recentActivities.length > 0) { %>
    <div class="mt-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 fast-card">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-ruxchai-grey rounded-lg flex items-center justify-center">
                        <i class="icon icon-time text-white"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900">กิจกรรมล่าสุด</h3>
                </div>
            </div>
            <div class="p-6">
                <div class="space-y-3">
                    <% recentActivities.slice(0, 5).forEach((activity, index) => { %>
                        <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 rounded-lg flex items-center justify-center 
                                    <%= activity.type === 'create' ? 'bg-green-500' : 
                                        activity.type === 'update' ? 'bg-blue-500' : 
                                        activity.type === 'delete' ? 'bg-red-500' : 'bg-gray-500' %>">
                                    <i class="icon <%= activity.type === 'create' ? 'icon-plus' : 
                                            activity.type === 'update' ? 'icon-edit' : 
                                            activity.type === 'delete' ? 'icon-delete' : 'icon-info' %> text-white icon-sm"></i>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm text-gray-900 font-medium">
                                    <%= activity.description %>
                                </p>
                                <p class="text-xs text-gray-500 mt-1">
                                    <%= activity.time %>
                                </p>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>
        </div>
    </div>
<% } %>